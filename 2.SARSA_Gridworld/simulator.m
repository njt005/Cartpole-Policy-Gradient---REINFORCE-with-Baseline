function [snext, r] = simulator(s, a)
    % probs for state trainsitions for prefered direction
    P = zeros(12,12,4);
    % action up
    P(1,1,1) = 0.9;
    P(1,4,1) = 0.1;
    P(2,1,1) = 0.8;
    P(2,2,1) = 0.2;
    P(3,2,1) = 0.8;
    P(3,3,1) = 0.1;
    P(3,6,1) = 0.1;
    P(4,4,1) = 0.8;
    P(4,1,1) = 0.1;
    P(4,7,1) = 0.1;
    P(6,6,1) = 0.8;
    P(6,3,1) = 0.1;
    P(6,9,1) = 0.1;
    P(7,7,1) = 0.8;
    P(7,4,1) = 0.1;
    P(7,10,1) = 0.1;
    P(8,8,1) = 0.1;
    P(8,7,1) = 0.8;
    P(8,11,1) = 0.1;
    P(9,8,1) = 0.8;
    P(9,6,1) = 0.1;
    P(9,12,1) = 0.1;
    P(10,10,1) = 0.9;
    P(10,7,1) = 0.1;
    P(11,10,1) = 0.8;
    P(11,11,1) = 0.1;
    P(11,8,1) = 0.1;
    P(12,11,1) = 0.8;
    P(12,12,1) = 0.1;
    P(12,9,1) = 0.1;
    % action down
    P(1,1,2) = 0.1;
    P(1,2,2) = 0.8;
    P(1,4,2) = 0.1;
    P(2,2,2) = 0.2;
    P(2,3,2) = 0.8;
    P(3,3,2) = 0.9;
    P(3,6,2) = 0.1;
    P(4,4,2) = 0.8;
    P(4,1,2) = 0.1;
    P(4,7,2) = 0.1;
    P(6,6,2) = 0.8;
    P(6,3,2) = 0.1;
    P(6,9,2) = 0.1;
    P(7,8,2) = 0.8;
    P(7,4,2) = 0.1;
    P(7,10,2) = 0.1;
    P(8,8,2) = 0.1;
    P(8,9,2) = 0.8;
    P(8,11,2) = 0.1;
    P(9,9,2) = 0.8;
    P(9,6,2) = 0.1;
    P(9,12,2) = 0.1;
    P(10,10,2) = 0.1;
    P(10,7,2) = 0.1;
    P(10,11,2) = 0.8;
    P(11,11,2) = 0.1;
    P(11,8,2) = 0.1;
    P(11,12,2) = 0.8;
    P(12,12,2) = 0.9;
    P(12,9,2) = 0.1;
    % action left
    P(1,1,3) = 0.9;
    P(1,2,3) = 0.1;
    P(2,1,3) = 0.1;
    P(2,2,3) = 0.8;
    P(2,3,3) = 0.1;
    P(3,3,3) = 0.9;
    P(3,2,3) = 0.1;
    P(4,4,3) = 0.2;
    P(4,1,3) = 0.8;
    P(6,6,3) = 0.2;
    P(6,3,3) = 0.8;
    P(7,7,3) = 0.1;
    P(7,4,3) = 0.8;
    P(7,8,3) = 0.1;
    P(8,8,3) = 0.8;
    P(8,7,3) = 0.1;
    P(8,9,3) = 0.1;
    P(9,9,3) = 0.1;
    P(9,6,3) = 0.8;
    P(9,8,3) = 0.1;
    P(10,10,3) = 0.1;
    P(10,7,3) = 0.8;
    P(10,11,3) = 0.1;
    P(11,10,3) = 0.1;
    P(11,8,3) = 0.8;
    P(11,12,3) = 0.1;
    P(12,12,3) = 0.1;
    P(12,9,3) = 0.8;
    P(12,11,3) = 0.1;
    % action right
    P(1,1,4) = 0.1;
    P(1,2,4) = 0.1;
    P(1,4,4) = 0.8;
    P(2,1,4) = 0.1;
    P(2,2,4) = 0.8;
    P(2,3,4) = 0.1;
    P(3,3,4) = 0.1;
    P(3,2,4) = 0.1;
    P(3,6,4) = 0.8;
    P(4,4,4) = 0.2;
    P(4,7,4) = 0.8;
    P(6,6,4) = 0.2;
    P(6,9,4) = 0.8;
    P(7,7,4) = 0.1;
    P(7,10,4) = 0.8;
    P(7,8,4) = 0.1;
    P(8,11,4) = 0.8;
    P(8,7,4) = 0.1;
    P(8,9,4) = 0.1;
    P(9,9,4) = 0.1;
    P(9,12,4) = 0.8;
    P(9,8,4) = 0.1;
    P(10,10,4) = 0.9;
    P(10,11,4) = 0.1;
    P(11,10,4) = 0.1;
    P(11,11,4) = 0.8;
    P(11,12,4) = 0.1;
    P(12,12,4) = 0.9;
    P(12,11,4) = 0.1;

    r_table = [ 0 0 0 1; 0 0 0 -100; 0 0 0 0];
    
    r = r_table(s);
    snext = randsample(1:12, 1, true, P(s,:,a));
end

